<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cosmic AI</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font -->
    <link rel="icon" href="Cosmic AI.png" type="image/png" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="main.css" />
  </head>

  <body class="flex h-screen bg-gray-950 text-white galaxy-background">
    <!-- Starfield background -->
    <div id="starsBg" class="stars-bg"></div>

    <!-- Sidebar -->
    <aside
      id="sidebar"
      class="sidebar sidebar-gemini collapsed w-24 sm:w-24 md:w-28 lg:w-72 flex flex-col items-center justify-between py-8 px-3 transition-all duration-300"
      style="min-height: 100vh"
      data-collapsed="true"
    >
      <!-- Top: Hamburger and New Chat -->
      <div class="flex flex-col items-center w-full">
        <button
          id="toggleViewButton"
          class="flex items-center justify-center w-14 h-14 sidebar-toggle-expanded rounded-2xl shadow-lg transition-all duration-300 transform hover:scale-110 focus:outline-none focus:ring-2 focus:ring-accent mb-4"
          aria-label="Toggle Sidebar"
          type="button"
          style="align-self: flex-start"
        >
          <!-- Hamburger Icon -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-7 w-7"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M4 6h16M4 12h16M4 18h16"
            />
          </svg>
        </button>
        <!-- New Chat Button directly below hamburger -->
        <button
          id="newChatButton"
          class="flex items-center justify-center w-full py-3 px-5 bg-accent hover:bg-accent rounded-xl text-base transition-colors duration-200 shadow-md font-semibold sidebar-label transition-all duration-300 group"
        >
          <!-- Plus Icon -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M12 6v6m0 0v6m0-6h6m-6 0H6"
            />
          </svg>
          <span class="sidebar-label-text ml-3 font-medium hidden lg:inline"
            >New Chat</span
          >
        </button>
      </div>

      <!-- Divider -->
      <div
        class="w-4/5 h-0.5 sidebar-divider my-6 rounded-full transition-all duration-300"
      ></div>

      <!-- Sidebar History List (if you want to show it here) -->
      <div
        id="sidebarHistoryList"
        class="w-full flex-1 overflow-y-auto px-2 py-2"
        style="display: none"
      >
        <!-- History items will be injected here -->
      </div>

      <!-- Bottom: Settings -->
      <div class="flex flex-col items-center w-full space-y-4 mb-2">
        <!-- Settings Button -->
        <button
          id="settingsButton"
          class="flex items-center justify-center w-full py-3 px-5 bg-gray-800 hover:bg-accent rounded-xl text-base transition-colors duration-200 shadow-md font-semibold sidebar-label transition-all duration-300 group"
        >
          <!-- Settings (Cog) Icon -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M11.25 2.25c.966 0 1.75.784 1.75 1.75v.5a7.5 7.5 0 013.5 1.45l.35-.35a1.75 1.75 0 112.475 2.475l-.35.35a7.5 7.5 0 011.45 3.5h.5a1.75 1.75 0 110 3.5h-.5a7.5 7.5 0 01-1.45 3.5l.35.35a1.75 1.75 0 11-2.475 2.475l-.35-.35a7.5 7.5 0 01-3.5 1.45v.5a1.75 1.75 0 11-3.5 0v-.5a7.5 7.5 0 01-3.5-1.45l-.35.35a1.75 1.75 0 11-2.475-2.475l.35-.35a7.5 7.5 0 01-1.45-3.5h-.5a1.75 1.75 0 110-3.5h.5a7.5 7.5 0 011.45-3.5l-.35-.35A1.75 1.75 0 115.8 5.6l.35.35A7.5 7.5 0 019.6 4.2v-.5c0-.966.784-1.75 1.75-1.75zM12 8.25a3.75 3.75 0 100 7.5 3.75 3.75 0 000-7.5z"
            />
          </svg>
          <span class="sidebar-label-text ml-3 font-medium hidden lg:inline"
            >Settings</span
          >
        </button>
        <!-- Logout Button -->
        <button
          id="logoutButton"
          class="flex items-center justify-center w-full py-3 px-5 bg-gray-800 hover:bg-red-600 rounded-xl text-base transition-colors duration-200 shadow-md font-semibold sidebar-label transition-all duration-300 group mt-2"
        >
          <!-- Logout Icon -->
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-5 w-5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a2 2 0 01-2 2H7a2 2 0 01-2-2V7a2 2 0 012-2h6a2 2 0 012 2v1"
            />
          </svg>
          <span class="sidebar-label-text ml-3 font-medium hidden lg:inline"
            >Logout</span
          >
        </button>
      </div>
    </aside>

    <!-- Main Content -->
    <main
      id="mainContent"
      class="flex-1 flex flex-col items-center pt-20 px-4 md:px-8 lg:px-16 overflow-auto bg-gradient-to-br from-black via-blue-950 to-black main-content-maximized"
    >
      <!-- Cosmic AI Title -->
      <h1
        id="cosmicAITitle"
        class="text-5xl md:text-7xl lg:text-8xl font-extrabold mb-10 md:mb-16 text-center text-transparent bg-clip-text bg-gradient-to-r from-orange-400 to-blue-700 tracking-tight drop-shadow-lg animate-float"
      >
        Cosmic AI
      </h1>

      <!-- Wrap your search bar in a form for chat submit -->
      <form
        id="chatForm"
        class="w-full max-w-xl md:max-w-2xl"
        style="transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1)"
      >
        <!-- Search Bar -->
        <div
          id="searchBar"
          class="bg-gray-800 rounded-full flex items-center px-6 py-3 shadow-2xl border border-blue-800 hover:border-orange-500 transition-all duration-300"
        >
          <input
            type="text"
            id="searchInput"
            placeholder=""
            class="flex-1 bg-transparent border-none outline-none text-white text-lg md:text-xl placeholder-gray-500"
            autocomplete="off"
          />
          <!-- Only one send button, with a send icon -->
          <button
            id="sendButton"
            type="submit"
            class="bg-orange-600 hover:bg-orange-700 rounded-full p-2 ml-4 transition-colors duration-200 shadow-md flex items-center justify-center"
          >
            <!-- Send icon (paper plane) -->
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class="h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M5 12l14-7-7 14-2-5-5-2z"
              />
            </svg>
          </button>
        </div>
      </form>
      <!-- Move chatMessages OUTSIDE the form and make it fixed at the bottom above the chatForm -->
      <div
        id="chatMessages"
        class="fixed left-1/2 -translate-x-1/2 bottom-16 w-[98vw] max-w-5xl mx-auto mb-2 bg-gray-900 bg-opacity-90 rounded-xl shadow-lg p-4 z-30 hidden custom-scrollbar"
        style="
          transition: margin-bottom 0.6s cubic-bezier(0.4, 0, 0.2, 1);
          max-height: 75vh;
          overflow-y: auto;
        "
      ></div>

      <!-- Message display -->
      <div
        id="messageDisplay"
        class="mt-6 p-4 bg-gray-800 text-blue-200 rounded-xl shadow-lg max-w-lg text-center border border-gray-700 transition-colors duration-300 hidden"
      >
        <!-- Message will be inserted here -->
      </div>
    </main>

    <!-- Settings Modal -->
    <div
      id="settingsModal"
      class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ease-out hidden"
      style="backdrop-filter: blur(5px)"
    >
      <div
        id="settingsModalContent"
        class="bg-gray-900 p-8 rounded-3xl shadow-2xl max-w-lg w-full border border-gray-700 relative transform scale-95 transition-all duration-300 ease-out"
        style="
          background-image: linear-gradient(to bottom right, #1a202c, #2d3748);
        "
      >
        <h2 class="text-3xl font-bold text-center mb-6 text-orange-400">
          Cosmic AI Settings
        </h2>

        <!-- Close button -->
        <button
          id="closeSettingsModal"
          class="absolute top-4 right-4 text-gray-400 hover:text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-orange-500 rounded-full p-2 transform hover:scale-110 active:scale-95"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M6 18L18 6M6 6l12 12"
            />
          </svg>
        </button>

        <!-- Scrollable content area for settings -->
        <div
            class="p-4 bg-gray-800 rounded-lg border border-gray-700 shadow-inner hover:border-gray-600 transition-colors duration-200"
          >
            <h3 class="text-xl font-semibold mb-3">Appearance</h3>
            <label for="theme-select" class="block text-gray-400 mb-2"
              >Cosmic Theme:</label
            >
            <select
              id="theme-select"
              class="w-full p-2 rounded-md bg-gray-700 border border-gray-600 text-white focus:outline-none focus:ring-2 focus:ring-orange-500 transition-colors duration-200"
            >
              <option value="nebula-flare">Nebula Flare (Orange/Blue)</option>
              <option value="deep-nebula">Deep Nebula (Blue/Purple)</option>
              <option value="crimson-cosmos">Crimson Cosmos (Red/Gold)</option>
            </select>
            <div class="flex items-center mt-4">
              <label for="floating-title-toggle" class="text-gray-400 mr-3"
                >Animated Title Effect:</label
              >
              <input
                type="checkbox"
                id="floating-title-toggle"
                checked
                class="custom-checkbox"
              />
            </div>
            <div class="flex items-center mt-4">
              <label for="starfield-toggle" class="text-gray-400 mr-3">Animated Starfield Background:</label>
              <input type="checkbox" id="starfield-toggle" class="custom-checkbox" checked>
            </div>
          </div>

          <!-- Account Management -->
          <div
            class="p-4 bg-gray-800 rounded-lg border border-gray-700 shadow-inner hover:border-gray-600 transition-colors duration-200"
          >
            <h3 class="text-xl font-semibold mb-3">Account Management</h3>
            <p class="text-gray-400 mb-2">
              Manage your Cosmic AI account details.
            </p>
            <button
              class="bg-orange-700 hover:bg-orange-600 text-white py-2 px-4 rounded-lg mt-3 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-orange-500 transform hover:scale-105 active:scale-95"
            >
              Manage Profile
            </button>
            <button
              class="bg-orange-700 hover:bg-orange-600 text-white py-2 px-4 rounded-lg mt-3 ml-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-orange-500 transform hover:scale-105 active:scale-95"
            >
              Change Password
            </button>
            <!-- Clear History Button -->
            <button
              id="clearHistoryButton"
              class="bg-gray-700 hover:bg-red-600 text-white py-2 px-4 rounded-lg mt-3 ml-2 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 transform hover:scale-105 active:scale-95"
            >
              Clear History
            </button>
          </div>

          <p class="text-sm text-gray-500 mt-6 text-center pb-4">
            More advanced settings and features are being developed in the
            Cosmic AI laboratory!
          </p>
        </div>
      </div>
    </div>

    <!-- History Modal -->
    <div
      id="historyModal"
      class="fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4 transition-opacity duration-300 ease-out hidden"
      style="backdrop-filter: blur(5px)"
    >
      <div
        id="historyModalContent"
        class="bg-gray-900 p-8 rounded-3xl shadow-2xl max-w-lg w-full border border-gray-700 relative transform scale-95 transition-all duration-300 ease-out"
        style="
          background-image: linear-gradient(to bottom right, #1a202c, #2d3748);
        "
      >
        <h2 class="text-3xl font-bold text-center mb-6 text-orange-400">
          Search History
        </h2>

        <!-- Close button -->
        <button
          id="closeHistoryModal"
          class="absolute top-4 right-4 text-gray-400 hover:text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-orange-500 rounded-full p-2 transform hover:scale-110 active:scale-95"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-6 w-6"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M6 18L18 6M6 6l12 12"
            />
          </svg>
        </button>

        <!-- History List -->
        <div
          id="historyList"
          class="space-y-4 text-gray-300 overflow-y-auto max-h-[calc(80vh-120px)] pr-2 custom-scrollbar"
        >
          <p class="text-center text-gray-500" id="noHistoryMessage">
            No search history available yet.
          </p>
          <!-- History items will be dynamically added here -->
        </div>
      </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.8.1/firebase-firestore-compat.js"></script>
    <script src="config-file.js"></script>
    <script src="auth-check.js"></script>
    <script src="main-ui.js"></script>
    <script src="main.js"></script>
  </body>
</html>
